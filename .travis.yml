language:
  - objective-c
osx_image:
  - xcode11.4

xcode_workspace: Example/Cloudinary.xcworkspace
xcode_project: Example/Cloudinary.xcdeproj
xcode_scheme: travis_public_scheme
xcode_sdk: iphonesimulator13.0
# xcode_destination: platform=iOS Simulator,OS=10.1,name=iPad Pro (9.7-inch)

podfile: Example/Podfile
install: pod install --project-directory=Example

env:
  matrix:
   - TEST_SDK=iphonesimulator13.0 OS=13.0 NAME='iPhone 8'
   - TEST_SDK=iphonesimulator12.0 OS=12.0 NAME='iPhone 8'

before_script: >
  export CLOUDINARY_URL=$(bash tools/get_test_cloud.sh);
  echo cloud_name: "$(echo $CLOUDINARY_URL | cut -d'@' -f2)"

script:
  - xcodebuild clean test -workspace Example/Cloudinary.xcworkspace -scheme travis_public_scheme -sdk $TEST_SDK -destination "platform=iOS Simulator,OS=$OS,name=$NAME" -CLOUDINARY_URL=$CLOUDINARY_URL | xcpretty && exit ${PIPESTATUS[0]}




# xcode_destination: platform=iOS Simulator,OS=11.3,name=iPhone X
# For Objective-C projects, env, rvm, gemfile, xcode_sdk, and xcode_scheme can be given as arrays to construct a build matrix.

